(function(){var Wa={"0.js":"bbt","1.js":"basis.template.html","2.js":"basis.dom.event","3.js":"basis.l10n","4.js":"basis.event","5.js":"basis.template","6.js":"basis.template.htmlfgen"},vb,Ha={"0.js":function(g,a,b,c){b.require("1.js");var d=[],e=[],f=function(a,b){if("function"==typeof this[a])this[a](b)},j=function(a){var b=this.binding&&this.binding[a];(b=b&&b.getter)&&this.tmpl&&this.tmpl.set(a,b(this))},n={},l=1,D={attach:function(a,b,c){for(var d in b){var e=d.split(":");if(1<e.length)a[e[0]].on(e[1],
b[d].bind(c,a));else a.on(d,b[d],c)}},detach:function(a,b,c){for(var d in b){var e=d.split(":");1<e.length?a[e[0]].off(e[1],b[d],c):a.off(d,b[d],c)}}};g=function(a){var c;var g=d.indexOf(a);-1!=g?c=e[g]:(g=new b.template.html.Template(a),d.push(a),e.push(g),c=g);return function(){var a;if(this.binding&&(a=n[this.binding.id_],!a)){this.binding.id_||(this.binding.id_=l++);a=n[this.binding.id_]={bindingId:this.binding.id_};for(var b in this.binding)if(this.binding[b])if("string"==typeof this.binding[b]){var d=
this.binding[b].match(/^model:(.*)$/);a[b]=d?function(a){return{events:"model:change",getter:function(b){return b.model.get(a)}}}(d[1]||b):function(a){return{getter:function(b){return b[a]}}}(b)}else if("string"==typeof this.binding[b]||"object"==typeof this.binding[b])a[b]=this.binding[b]}this.tmpl=c.createInstance(this,f,null,a,D);this.updateBind=j;return this.tmpl.element}};c.bbt=a.exports=b.object.extend(g,{init:function(a){if(!a)return this;if(a.noConflict)return delete window.bt,this},template:g})},
"1.js":function(g,a,b,c){function d(a){a=b.template.getL10nTemplate(a);var c=a.templateId,d=k[c];d||(d=k[c]=new ba(a.source));return d}function e(a){var b=I[a&4095];return b&&b.instances[a>>12]}b.require("2.js");b.require("3.js");b.require("5.js");b.require("6.js");g=this.path;var f=c.document,j=b.dom.event,n=b.string.camelize,l=b.l10n.token,D=b.template.htmlfgen.getFunctions,h=b.template.TemplateSwitchConfig,la=b.template.TemplateSwitcher,q=b.template.Template,qa=b.template.TYPE_ELEMENT,x=b.template.TYPE_ATTRIBUTE,
wb=b.template.TYPE_TEXT,A=b.template.TYPE_COMMENT,C=b.template.TOKEN_TYPE,F=b.template.TOKEN_BINDINGS,B=b.template.TOKEN_REFS,w=b.template.ATTR_NAME,z=b.template.ATTR_VALUE,y=b.template.ATTR_NAME_BY_TYPE,G=b.template.ELEMENT_NAME,u=b.template.TEXT_VALUE,N=b.template.COMMENT_VALUE,T={},I={},Fa={svg:"http://www.w3.org/2000/svg"},O=!f.addEventListener&&"__basisTemplate"+parseInt(1E9*Math.random());O&&(c[O]=function(a,b){j.fireEvent(f,a);var c=T[a];c&&c(b)});var U,ca=f.createElement("div");ca.appendChild(f.createTextNode("a"));
ca.appendChild(f.createTextNode("a"));U=1==ca.cloneNode(!0).childNodes.length;var E,ca=f.createElement("div");ca.setAttribute("class","a");E=!ca.className;var k={},s=function(a,b){function c(a,b){var d="event-"+a;if(!T[a]&&(T[a]=function(a){a=new j.Event(a);if(!a||!("click"==a.type&&3==a.which)){var b=a.sender,c;if(b){do if(c=b.getAttributeNode&&b.getAttributeNode(d))break;while(b=b.parentNode);if(b&&c){var p=b,t,f;do if(t=b.basisTemplateId,"number"==typeof t&&(f=e(t)))break;while(b=b.parentNode);
if(f&&f.action){b=c.nodeValue.trim().split(" ");a.actionTarget=p;for(p=0;c=b[p++];)f.action.call(f.context,c,a)}}}}},!O))for(var t=0,u=j.browserEvents(a),f;f=u[t++];)j.addGlobalHandler(f,T[a]);O&&p.setAttribute("on"+a,O+'("'+a+'",event)');p.setAttribute(d,b)}function d(a,b){E&&"class"==a&&(a="className");p.setAttribute(a,b)}for(var p=b||f.createDocumentFragment(),g=b?4:0,m;m=a[g];g++)switch(m[C]){case qa:var k=m[G],h=k.split(/:/),k=1<h.length?f.createElementNS(Fa[h[0]],k):f.createElement(k);s(m,k);
p.appendChild(k);break;case x:var k=m[w],h=m[z],D=k.replace(/^event-/,"");if(D!=k)c(D,h);else if("class"!=k&&"style"!=k?!m[F]:h)d(k,h||"");break;case 4:case 5:(h=m[z-1])&&d(y[m[C]],h);break;case 6:c(m[1],m[2]||m[1]);break;case A:p.appendChild(f.createComment(m[N]||(m[B]?"{"+m[B].join("|")+"}":"")));break;case wb:U&&(g&&a[g-1][C]==wb)&&p.appendChild(f.createComment("")),p.appendChild(f.createTextNode(m[u]||(m[B]?"{"+m[B].join("|")+"}":"")||(m[F]?"{"+m[F]+"}":"")))}return p},W=function(){this.set(this.name,
this.value)},ma=function(a,c,p){var e=c&&c.bindingBridge,f=this.attaches&&this.attaches[a],u=null;if(e||f)if(e){if(!f||c!==f.value){f&&(f.tmpl&&(f.tmpl.element.toString=null,d(f.value).clearInstance(f.tmpl)),f.value.bindingBridge.detach(f.value,W,f));if("markup"==c.type&&c instanceof b.l10n.Token){var g=d(c),m=this.context,k=this.bindings,h=this.bindingInterface,u=g.createInstance(m,null,function Xb(){u=N.tmpl=g.createInstance(m,null,Xb,k,h);u.element.toString=function(){return c.value};W.call(N)},
k,h);u.element.toString=function(){return c.value}}this.attaches||(this.attaches=new p);var N=this.attaches[a]={name:a,value:c,tmpl:u,set:this.tmpl.set};e.attach(c,W,N)}else u=c&&"markup"==c.type?f.tmpl:null;if(u)return u.element;c=e.get(c)}else f&&(f.tmpl&&(f.tmpl.element.toString=null,d(f.value).clearInstance(f.tmpl)),f.value.bindingBridge.detach(f.value,W,f),this.attaches[a]=null);return c},p=function(a,b){return function(c){for(var d=0,p;p=a[d];d++)this(p,b[p](c))}},m=/\s+/,za="function"==typeof Node&&
f instanceof Node?function(a,b,c){a=c instanceof Node&&!c.basisNodeInUse?c:a;a!==b&&b.parentNode.replaceChild(a,b);return a}:function(a,b,c){c=c&&"object"==typeof c&&!c.basisNodeInUse?c:a;if(c!==b)try{b.parentNode.replaceChild(c,b)}catch(d){c=a,b!==c&&b.parentNode.replaceChild(c,b)}return c},J=function(a,b,c,d){c!==d&&(d?a.setAttribute(b,d):a.removeAttribute(b));return d},Ba={bind_textNode:function(a,b,c){b=za(a,b,c);b===a&&(a.nodeValue=c);return b},bind_node:za,bind_element:function(a,b,c){b=za(a,
b,c);b===a&&"string"==typeof c&&(a.innerHTML=c);return b},bind_comment:za,bind_attr:J,bind_attrClass:c.DOMTokenList&&f&&f.documentElement.classList instanceof c.DOMTokenList?function(a,c,d,p,e){var f=d?p+d:"";f!=c&&(c&&a.classList.remove(c),f&&(a.classList.add(f),e&&(a.classList.add(f+"-anim"),b.nextTick(function(){a.classList.remove(f+"-anim")}))));return f}:function(a,c,d,p,e){var f=d?p+d:"";if(f!=c){d=a.className;var u="string"!=typeof d;u&&(d=d.baseVal);d=d.split(m);c&&d.remove(c);f&&(d.push(f),
e&&(d.add(f+"-anim"),b.nextTick(function(){var b=(u?a.className.baseVal:a.className).split(m);b.remove(f+"-anim");u?a.className.baseVal=b.join(" "):a.className=b.join(" ")})));u?a.className.baseVal=d.join(" "):a.className=d.join(" ")}return f},bind_attrStyle:function(a,b,c,d){if(c!==d)try{a.style[n(b)]=d}catch(p){}return d},resolve:ma,l10nToken:l,createBindingFunction:function(a){var b={};return function(c,d,e,f){if(!c)return{};var u="bindingId"in c?c.bindingId:null,g=b[u];if(!g){for(var g=[],m={},
k={},h={},N=!1,j=0,s;s=a[j];j++){var D=c[s],J=D&&D.getter;if(J&&(m[s]=J,g.push(s),D.events))for(var D=String(D.events).trim().split(/\s+|\s*,\s*/),J=0,n;n=D[J];J++)k[n]?k[n].push(s):k[n]=[s]}for(n in k)N=!0,h[n]=p(k[n],m);g={names:g,sync:p(g,m),handler:N?h:null};u&&(b[u]=g)}d&&e&&g.sync.call(e,d);if(!f)return{};g.handler&&f.attach(d,g.handler,e);return g.handler}}},ba=q.subclass({className:g+".Template",__extend__:function(a){return a instanceof ba?a:a instanceof h?new Ca(a):new ba(a)},builder:function(a){var b=
D(a,!0,this.source.url,a.source_,!U),c,d={},p={},e=[],f=0,u=s(a),g=function(){return u.cloneNode(!0)},m=this.templateId;I[m]={template:this,instances:d};if(b.createL10nSync){var k=b.createL10nSync(u,p,J,U);a=0;for(var h;h=b.l10nKeys[a];a++)k(h,l(h).value);if(b.l10nKeys)for(a=0;h=b.l10nKeys[a];a++)h={path:h,token:l(h),handler:function(a){k(this.path,a);for(var b in d)d[b].tmpl.set(this.path,a)}},h.token.attach(h.handler,h),e.push(h),h=null}c=b.createInstance(m,d,g,Ba,p,U);return{createInstance:function(a,
b,p,e,u){var g=f++;a=c(g,a,b,p,e,u);d[g]=a;return a.tmpl},destroyInstance:function(a){a=a.templateId_;var b=d[a];if(b){b.handler&&b.bindingInterface.detach(b.context,b.handler,b.tmpl.set);for(var c in b.attaches)ma.call(b,c,null);delete d[a]}},keys:b.keys,destroy:function(a){for(var c=0,f;f=e[c];c++)f.token.detach(f.handler,f);for(var h in d)if(c=d[h],a&&c.rebuild&&c.rebuild.call(c.context),!a||h in d)for(h in c.handler&&c.bindingInterface.detach(c.context,c.handler,c.tmpl.set),c.attaches)ma.call(h,
null);I[m]&&I[m].instances===d&&delete I[m];d=k=e=p=u=g=b=null}}}}),Ca=la.subclass({className:g+".TemplateSwitcher",templateClass:ba});a.exports={Template:ba,TemplateSwitcher:Ca};b.template.extend({buildHtml:s,resolveTemplateById:function(a){return(a=I[a&4095])&&a.template},resolveObjectById:function(a){return(a=e(a))&&a.context},resolveTmplById:function(a){return(a=e(a))&&a.tmpl}})},"2.js":function(g,a,b,c){function d(a){return a instanceof E?a.event_:a||c.event}function e(a){return"string"==typeof a?
G.getElementById(a):a}function f(a){return a.target||a.srcElement}function j(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}function n(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function l(a,b){(b=e(b))?B(b,a,l):(n(a),j(a))}function D(a){return a.keyCode||a.which||0}function h(a){return a.charCode||a.keyCode||0}function la(a,b){return"number"==typeof a.which?a.which==b.VALUE:!!(a.button&b.BIT)}function q(a){return a.changedTouches?a.changedTouches[0].pageX:"pageX"in a?a.pageX:
a.clientX+(G.documentElement.scrollLeft||G.body.scrollLeft)}function qa(a){return a.changedTouches?a.changedTouches[0].pageY:"pageY"in a?a.pageY:a.clientY+(G.documentElement.scrollTop||G.body.scrollTop)}function x(a){var b=0;"wheelDelta"in a?b=a.wheelDelta:"DOMMouseScroll"==a.type&&(b=-a.detail);return b/Math.abs(b)}function A(a){var b=N(k[a.type]),c=s[a.type],d=new E(a);if(c)c.handler.call(c.thisObject,d),l(a);else if(b)for(a=b.length;0<a--;)c=b[a],c.handler.call(c.thisObject,d)}function C(a){var b=
s[a];b&&(F(a,b.handler,b.thisObject),delete s[a])}function aa(a,b,c){var d=k[a];if(d){a=0;for(var e;e=d[a];a++)if(e.handler===b&&e.thisObject===c)return}else W?B(G,a,u):G.addEventListener(a,A,!0),d=k[a]=[];d.push({handler:b,thisObject:c})}function F(a,b,c){var d=k[a];if(d)for(var e=0,f;f=d[e];e++)if(f.handler===b&&f.thisObject===c){d.splice(e,1);d.length||(delete k[a],W?w(G,a,u):G.removeEventListener(a,A,!0));break}}function B(a,b,c,f){a=e(a);if(!a)throw 3;if("function"!=typeof c)throw 4;a[I]||(a[I]=
{});var u={handler:c,thisObject:f},g=a[I],h=g[b];if(h){for(a=0;g=h[a];a++)if(g.handler===c&&g.thisObject===f)return;h.push(u)}else h=g[b]=[u],h.fireEvent=function(a){a=d(a);if(W&&(a&&k[b])&&"undefined"==typeof a.returnValue){A(a);if(!0===a.cancelBubble)return;"undefined"==typeof a.returnValue&&(a.returnValue=!0)}var c=0;a=new E(a);for(var e;e=h[c++];)e.handler.call(e.thisObject,a)},T?a.addEventListener(b,h.fireEvent,!1):a.attachEvent("on"+b,h.fireEvent)}function w(a,b,c,d){a=e(a);var f=a[I];if(f&&
(f=f[b]))for(var u=0,g;g=f[u];u++)if(g.handler===c&&g.thisObject===d){f.splice(u,1);f.length||z(a,b);break}}function z(a,b){a=e(a);var c=a[I];if(c)if("string"!=typeof b)for(b in c)z(a,b);else{var d=c[b];d&&(a.removeEventListener?a.removeEventListener(b,d.fireEvent,!1):a.detachEvent("on"+b,d.fireEvent),delete c[b])}}function y(a){return function(b,c){return a(d(b),c)}}var G=c.document,u=b.fn.$null,N=b.array.from,T=!!G.addEventListener,I="__basisEvents";g={BACKSPACE:8,TAB:9,CTRL_ENTER:10,ENTER:13,SHIFT:16,
CTRL:17,ALT:18,ESC:27,ESCAPE:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123};var Fa={VALUE:1,BIT:1},O={VALUE:2,BIT:4},U={VALUE:3,BIT:2},ca={mousewheel:["mousewheel","DOMMouseScroll"]},E=b.Class(null,{className:this.path+".Event",KEY:g,init:function(a){a=d(a);b.object.extend(b.object.complete(this,a),{event_:a,sender:f(a),key:D(a),charCode:h(a),mouseLeft:la(a,
Fa),mouseMiddle:la(a,O),mouseRight:la(a,U),mouseX:q(a),mouseY:qa(a),wheelDelta:x(a)})},stopBubble:function(){j(this.event_)},stopPropagation:function(){j(this.event_)},preventDefault:function(){n(this.event_)},die:function(){this.stopBubble();this.preventDefault()}}),k={},s={},W=!T,ma={};a.exports={W3CSUPPORT:T,browserEvents:function(a){return ca[a]||[a]},getEventInfo:function(a,b){b||(b="div");var c=b+"-"+a;if(ma[c])return ma[c];var d=!1,e=!1;if(!T){var f="on"+a,u=G.createElement("div"),g=u.appendChild(G.createElement(b));
u[f]=function(){e=!0};try{g.fireEvent(f),d=!0}catch(h){}}return ma[c]={supported:d,bubble:e}},KEY:g,MOUSE_LEFT:Fa,MOUSE_RIGHT:U,MOUSE_MIDDLE:O,Handler:function(a,b){this.handler=a;this.thisObject=b},Event:E,sender:y(f),cancelBubble:y(j),cancelDefault:y(n),kill:y(l),key:y(D),charCode:y(h),mouseButton:y(la),mouseX:y(q),mouseY:y(qa),wheelDelta:y(x),addGlobalHandler:aa,removeGlobalHandler:F,captureEvent:function(a,b,c){s[a]&&C(a);aa(a,b,c);s[a]={handler:b,thisObject:c}},releaseEvent:C,addHandler:B,addHandlers:function(a,
b,c){a=e(a);for(var d in b)B(a,d,b[d],c)},removeHandler:w,clearHandlers:z,fireEvent:function(a,b,c){a=e(a);(a=a[I])&&a[b]&&a[b].fireEvent(c)},onUnload:function(a,b){B(c,"unload",a,b)},wrap:d}},"3.js":function(g,a,b){function c(a){var b=[],c;for(c in a)D.call(a,c)&&b.push(c);return b}function d(a,b,c,e){var f=a.cultureValues[b];e=e?e+".":"";for(var g in c)if(D.call(c,g)){var h=e+g,j=c[g];(f[h]=j)&&("object"==typeof j||Array.isArray(j))&&d(a,b,j,h)}}function e(a){var c=b.path.extname(a);a=b.resource(".l10n"!=
c?b.path.dirname(a)+"/"+b.path.basename(a,c)+".l10n":a);(c=C[a.url])||(c=C[a.url]=new aa(a));return c}function f(a){var b=w[a];b||(b=w[a]=new G(a));return b}function j(a){if(a&&y!=a){y=a;for(var b=0,c;c=A[b];b++)c.syncValues();f.set(a)}}function n(a){"string"==typeof a&&(a=a.trim().split(" "));if(a.length){var c={},d,e;z={};for(var g=0,h;d=a[g];g++)d=d.split("/"),2<d.length&&(d=d.slice(0,2)),h=d[0],e||(e=h),c[h]=f(h),z[h]=d;for(h in z)z[h]=b.array.flatten(z[h].map(function(a){return z[a]})).concat(e).filter(function(a,
b,c){return!b||-1==c.lastIndexOf(a,b-1)});B=b.object.keys(c);!1==y in c&&j(e)}}b.require("4.js");g=this.path;var l=b.Class,D=Object.prototype.hasOwnProperty,h=b.event.Emitter;b.resource.extensions[".l10n"]=b.resource.extensions[".json"];var la=[],q={},qa=l(b.Token,{className:g+".ComputeToken",init:function(a,c){c.computeTokens[this.basisObjectId]=this;this.token=c;this.get=c.computeGetMethod;b.Token.prototype.init.call(this,a)},toString:function(){return this.get()},destroy:function(){delete this.token.computeTokens[this.basisObjectId];
this.token=null;b.Token.prototype.destroy.call(this)}}),x=l(b.Token,{className:g+".Token",index:NaN,dictionary:null,name:"",type:"default",computeTokens:null,init:function(a,c,d,e){b.Token.prototype.init.call(this,e);this.index=la.push(this)-1;this.name=c;this.dictionary=a;this.computeTokens={};d?this.setType(d):this.apply()},toString:function(){return this.get()},computeGetMethod:function(){},apply:function(){var a={},d=this.computeTokens,e="plural"==this.type?function(){return a[w[y].plural(this.value)]}:
function(){return a[this.value]};this.computeGetMethod=e;if("plural"==this.type&&Array.isArray(this.value)||"default"==this.type&&"object"==typeof this.value)a=b.object.slice(this.value,c(this.value));for(var f in d){var g=d[f],h=g.get(),j=e.call(g);g.get=e;h!==j&&g.apply()}b.Token.prototype.apply.call(this)},setType:function(a){if("plural"!=a&&(!b.l10n.enableMarkup||"markup"!=a))a="default";this.type!=a&&(this.type=a,this.apply())},compute:function(a,c){1==arguments.length&&(c=a,a="");c=b.getter(c);
a=String(a).trim().split(/\s+|\s*,\s*/).sort();var d=a.concat(this.basisObjectId,c.basisGetterId_).join("_");if(q[d])return q[d];for(var e=this,f={},g=function(a){this.set(c(a))},j={destroy:function(a){delete f[a.basisObjectId];this.destroy()}},D=0,n;n=a[D];D++)"destroy"!=n&&(j[n]=g);return q[d]=function(a){if(!1==a instanceof h)throw 5;var b=a.basisObjectId,d=f[b];d||(d=f[b]=new qa(c(a),e),a.addHandler(j,d));return d}},computeToken:function(a){return new qa(a,this)},token:function(a){"plural"==this.type&&
(a=w[y].plural(a));if(this.dictionary)return this.dictionary.token(this.name+"."+a)},destroy:function(){for(var a in this.computeTokens)this.computeTokens[a].destroy();this.value=this.computeTokens=null;b.Token.prototype.destroy.call(this)}}),A=[],C={},aa=l(null,{className:g+".Dictionary",tokens:null,types:null,cultureValues:null,index:NaN,resource:null,init:function(a){this.tokens={};this.types={};this.cultureValues={};this.resource=a;this.update(a());a.attach(this.update,this);this.index=A.push(this)-
1;F.set(a.url)},update:function(a){a||(a={});this.cultureValues={};for(var b in a)/^_|_$/.test(b)||(this.cultureValues[b]={},d(this,b,a[b]));this.types=a._meta&&a._meta.type||{};for(var c in this.tokens)this.tokens[c].setType(this.types[c]);this.syncValues()},syncValues:function(){for(var a in this.tokens)this.tokens[a].set(this.getValue(a))},getValue:function(a){for(var b=z[y],c=0,d;d=b[c];c++)if((d=this.cultureValues[d])&&a in d)return d[a]},getCultureValue:function(a,b){return this.cultureValues[a]&&
this.cultureValues[a][b]},token:function(a){var b=this.tokens[a];b||(b=this.tokens[a]=new x(this,a,this.types[a],this.getValue(a)));return b},destroy:function(){this.cultureValues=this.tokens=null;b.array.remove(A,this)}}),F=new b.Token,B=[],w={},z={},y=null,G=b.Class(null,{className:g+".Culture",name:"",init:function(a){this.name=a;"ru-RU"==a&&(this.plural=function(a){return 1==a%10&&11!=a%100?0:2<=a%10&&4>=a%10&&(10>a%100||20<=a%100)?1:2})},plural:function(a){return 1==Number(a)?0:1}});b.object.extend(f,
new b.Token(y));n("en-US");j("en-US");a.exports={ComputeToken:qa,Token:x,token:function(a){if("#"==a.charAt(0))return la[parseInt(a.substr(1),36)];if(a=a.match(/^(.+?)@(.+)$/))return e(a[2]).token(a[1])},Dictionary:aa,dictionary:e,getDictionaries:function(){return A.slice(0)},addCreateDictionaryHandler:F.attach.bind(F),removeCreateDictionaryHandler:F.detach.bind(F),Culture:G,culture:f,getCulture:function(){return y},setCulture:j,getCultureList:function(){return B.slice(0)},setCultureList:n,onCultureChange:function(a,
b,c){f.attach(a,b);c&&a.call(b,y)}}},"4.js":function(g,a,b){function c(a){var b=n[a];b||(b=function(){for(var b=this,c,d;b=b.handler;)d=b.callbacks[a],"function"==typeof d&&d.apply(b.context||this,c||(c=[this].concat(e.call(arguments)))),d=b.callbacks["*"],"function"==typeof d&&d.call(b.context||this,{sender:this,type:a,args:arguments});f&&this.emit_debug&&this.emit_debug({sender:this,type:a,args:arguments})},f&&(b=(new Function("slice, DEVMODE",'return {"'+d+".events."+a+'":\n\n      function('+
e.call(arguments,1).join(", ")+"){"+b.toString().replace(/\beventName\b/g,"'"+a+"'").replace(/^function[^(]*\(\)[^{]*\{|\}$/g,"")+'}\n\n}["'+d+".events."+a+'"];'))(e,f)),n[a]=b);return b}var d=this.path;g=b.Class;var e=Array.prototype.slice,f=!1,j={},n={},l=function(){throw 6;};g=g(null,{className:d+".Emitter",extendConstructor_:!0,handler:null,emit_destroy:c("destroy"),listen:g.nestedExtendProperty(),init:function(){this.handler&&!this.handler.callbacks&&(this.handler={callbacks:this.handler,context:this,
handler:null})},addHandler:function(a,c){f&&!a&&b.dev.warn(this.constructor.className+"#addHandler: callbacks is not an object (",a,")");c=c||this;if(f)for(var d=this;d=d.handler;)if(d.callbacks===a&&d.context===c){b.dev.warn(this.constructor.className+"#addHandler: add duplicate event callbacks",a,"to Emitter instance:",this);break}this.handler={callbacks:a,context:c,handler:this.handler}},removeHandler:function(a,c){var d=this,e;for(c=c||this;e=d,d=d.handler;)if(d.callbacks===a&&d.context===c){d.callbacks=
j;e.handler=d.handler;return}f&&e!==this&&b.dev.warn(this.constructor.className+"#removeHandler: no handler removed")},destroy:function(){f&&(this.destroy=l);this.emit_destroy();this.handler=null}});f&&g.extend({handler_list:function(){for(var a=[],b=this;b=b.handler;)a.push([b.callbacks,b.context]);return a},emit_debug:null});a.exports={create:c,createHandler:function(a,b){var c={events:[]};if(a){a=String(a).trim().split(/\s+|\s*,\s*/).sort();for(var c={events:a},d=0,e;e=a[d];d++)"destroy"!=e&&(c[e]=
b)}return c},events:n,Emitter:g}},"5.js":function(g,a,b){function c(a){"string"==typeof a&&(a=b.l10n.token(a));if(!a)return null;var c=a.basisObjectId,d=m[c];d||(d=m[c]=new Z(new za(a)));return d}function d(){this.destroyBuilder&&j.call(this);for(var a=0,b;b=this.attaches_[a];a++)b.handler.call(b.context)}function e(a){for(var b=[],c=0;c<a.length;c++)b.push(Array.isArray(a[c])?e(a[c]):a[c]);return b}function f(a,c,d,f){var g=a,X;"function"==typeof g&&(c="baseURI"in a?a.baseURI:c,X="url"in a?a.url:
X,g=g());g instanceof b.Token&&(c="baseURI"in a?a.baseURI:c,X="url"in a?a.url:X,g=g.get());if(Array.isArray(g))d&&(g=e(g)),g={tokens:g};else if("object"!=typeof g||!Array.isArray(g.tokens))g=String(g);"string"==typeof g&&(g=J(g,c,f,X));return g}function j(){var a=f(this.source,this.baseURI),c=this.destroyBuilder,d=this.builder(a.tokens,this),e=this.deps_;if(e){this.deps_=null;for(var g=0,X;X=e[g];g++)X.bindingBridge.detach(X,j,this)}if(a.deps&&a.deps.length){this.deps_=e=a.deps;for(g=0;X=e[g];g++)X.bindingBridge.attach(X,
j,this)}this.createInstance=d.createInstance;this.clearInstance=d.destroyInstance;this.getBinding=function(){return{names:[],events:{},handler:null,sync:function(){}}};this.destroyBuilder=d.destroy;if(a=a.resources&&0<a.resources.length?a.resources:null)for(g=0;d=a[g];g++)pa[x.extname(d)]&&b.resource(d)().startUse();if(this.resources)for(g=0;d=this.resources[g];g++)pa[x.extname(d)]&&b.resource(d)().stopUse();this.resources=a;c&&c(!0)}function n(){var a=b.array(arguments).join("."),c=sa[a];c||(c=new ja("",
a),sa[a]=c);return c}function l(a,b){for(var c=[],d={},e=[],f=0;f<b.length;f++)d[b[f]]||(d[b[f]]=!0,e.push(b[f]));c.source=e.join("/");d={base:!0};for(e=0;e<b.length;e++)f=b[e]||"base",f==a||d[f]||(h(f),d[f]=!0,c.push(f),b.splice.apply(b,[e+1,0].concat(M[f].fallback)));c.unshift(a);"base"!=a&&c.push("base");c.value=c.join("/");return c}function D(a,b){for(var c=M[a].sourcesList,d=0,e;e=c[d];d++)if(e.hasOwnProperty(b))return e[b];return""}function h(a){a||(a="base");if(M[a])return M[a].theme;if(!/^([a-z0-9\_\-]+)$/.test(a))throw 9;
var c={},d=[c],e=new va;M[a]={theme:e,sources:c,sourcesList:d,fallback:[]};var f=function(b,d){!1==b in c&&(c[b]=d,-1!=M[ta].fallback.indexOf(a)&&n(b).set());return n(b)};b.object.extend(e,{name:a,fallback:function(b){if(e!==wa&&0<arguments.length){var c="string"==typeof b?b.split("/"):[],d={},c=l(a,c);if(M[a].fallback.source!=c.source){M[a].fallback.source=c.source;for(var f in M){var g=M[f].fallback,c=l(f,(g.source||"").split("/"));if(c.value!=g.value){d[f]=!0;M[f].fallback=c;g=M[f].sourcesList;
g.length=c.length;for(var Ga=0;Ga<g.length;Ga++)g[Ga]=M[c[Ga]].sources}}}for(f in d)if(-1!=M[ta].fallback.indexOf(f)){c=void 0;for(c in sa)n(c).set();break}}c=M[a].fallback.slice(1);c.source=M[a].fallback.source;return c},define:function(a,b){"function"==typeof a&&(a=a());if("string"==typeof a){if("object"==typeof b){var c=a,d=b,g={},ra;for(ra in d)d.hasOwnProperty(ra)&&(g[ra]=f(c+"."+ra,d[ra]));return g}return 1==arguments.length?n(a):f(a,b)}if("object"==typeof a){d=a;for(c in d)d.hasOwnProperty(c)&&
f(c,d[c]);return e}},apply:function(){if(a!=ta){ta=a;for(var b in sa)n(b).set();b=0;for(var c;c=xa[b];b++)c.fn.call(c.context,a)}return e},getSource:function(b){return b?D(a,x):c[x]},drop:function(b){c.hasOwnProperty(b)&&(delete c[b],-1!=M[ta].fallback.indexOf(a)&&n(b).set())}});M[a].fallback=l(a,[]);d.push(M.base.sources);return e}b.require("3.js");g=this.path;var q=b.Class,A=b.cleaner,x=b.path,C=b.array.search,K=b.array.add,L=b.array.remove,aa=[],F={},B=1,w=2,z=0,y=1,G=3,u=4,N={4:"class",5:"style"},
T={"class":4,style:5},I=/((?:.|[\r\n])*?)(\{(?:l10n:([a-zA-Z_][a-zA-Z0-9_\-]*(?:\.[a-zA-Z_][a-zA-Z0-9_\-]*)*(?:\.\{[a-zA-Z_][a-zA-Z0-9_\-]*\})?)\})?|<(\/|!--(\s*\{)?)?|$)/g,Q=/([a-z_][a-z0-9\-_]*)(:|\{|\s*(\/?>)?)/ig,O=/([a-z_][a-z0-9_\-]*)(:|\{|=|\s*)|(\/?>)/ig,U=/(.|[\r\n])*?--\x3e/g,ca=/([a-z_][a-z0-9_\-]*(?::[a-z_][a-z0-9_\-]*)?)>/ig,E=/([a-z_][a-z0-9_]*)(\||\}\s*)/ig,k=/"((?:(\\")|[^"])*?)"\s*/g,s=/^/g,W={text:/((?:.|[\r\n])*?)(?:<\/b:text>|$)/g},ma=/\\"/g,p=function(a){var b=[],c=[],d={childs:b},
e,f,g,h=!1,j=0,p,r=I,n=0,v;for(a=a.trim();n<a.length||r!=I;)if(e=r.lastIndex=n,v=r.exec(a),!v||v.index!==n)if(r==E&&f&&8==f.type)r=U;else{h&&(d=c.pop());f&&d.childs.pop();if(f=d.childs.pop())3==f.type&&!f.refs?j-="len"in f?f.len:f.value.length:d.childs.push(f);h=!1;r=I}else{n=r.lastIndex;switch(r){case I:p=e+v[1].length;j!=p&&(e=j==e?v[1]:a.substring(j,p),(f=e.replace(/\s*(\r\n?|\n\r?)\s*/g,""))&&d.childs.push({type:3,len:e.length,value:f}));j=p;v[3]?d.childs.push({type:3,refs:["l10n:"+v[3]],value:"{l10n:"+
v[3]+"}"}):"{"==v[2]?(g=n-1,d.childs.push(f={type:3}),r=E):v[4]?"/"==v[4]?(f=null,r=ca):(d.childs.push(f={type:8}),v[5]?(g=n-v[5].length,r=E):(g=n,r=U)):v[2]&&(h=!0,c.push(d),d.childs.push(f={type:B,attrs:[],childs:[]}),d=f,r=Q);break;case ca:v[1]!==(d.prefix?d.prefix+":":"")+d.name?d.childs.push({type:3,value:"</"+v[0]}):d=c.pop();r=I;break;case Q:case O:if(":"==v[2]){f.prefix?r=s:f.prefix=v[1];break}v[1]&&(f.name=v[1],f.type==w&&d.attrs.push(f));if("{"==v[2]){r=f.type==B?E:s;break}if(v[3]){h=!1;
if("/>"==v[3])d=c.pop();else if("b"==d.prefix&&d.name in W){r=W[d.name];break}r=I;break}if("="==v[2]){r=k;break}f={type:w};r=O;break;case U:f.value=a.substring(g,n-3);r=I;break;case E:f.refs?f.refs.push(v[1]):f.refs=[v[1]];"|"!=v[2]&&(3==f.type?(n-=v[2].length-1,f.value=a.substring(g,n),r=I):8==f.type?r=U:f.type==w&&"="==a[n]?(n++,r=k):(f={type:w},r=O));break;case k:f.value=v[1].replace(ma,'"');f={type:w};r=O;break;case W.text:d.childs.push({type:3,value:v[1]});d=c.pop();r=I;break;default:throw 7;
}r==I&&(j=n)}j!=n&&d.childs.push({type:3,value:a.substring(j,n)});b.templateTokens=!0;return b},m={},za=b.Token.subclass({className:g+".L10nProxyToken",token:null,url:"",init:function(a){this.url=a.dictionary.resource.url+":"+a.name;this.token=a;this.set();a.attach(this.set,this)},set:function(){return b.Token.prototype.set.call(this,"markup"==this.token.type?'<span class="basisjs-markup" data-basisjs-l10n="'+(this.token.name+"@"+this.token.dictionary.resource.url)+'">'+String(this.token.value)+"</span>":
"")},destroy:function(){b.Token.prototype.destroy.call(this);this.token=null}}),J,Ba=function(a){return(a.prefix?a.prefix+":":"")+a.name},ba=function(a,b){fa[b]||("#"==b.charAt(0)?fa[b]=String.fromCharCode("x"==b.charAt(1)||"X"==b.charAt(1)?parseInt(b.substr(2),16):b.substr(1)):ha&&(ha.innerHTML=a,fa[b]=ha.firstChild?ha.firstChild.nodeValue:a));return fa[b]||a},Ca=function(a){a=a.refs;return!a||!a.length?0:a},R=function(a,b){function c(a){for(var b,d=[],e=[],f={},g=0;g<a.length;g++)g%2?(b=a[g],f[b]||
(f[b]=d.length,d.push(b)),e.push(f[b])):a[g]&&e.push(a[g].replace(V,ba));return[d,e]}var d=0,e,f;if(b)switch(a){case "class":if(e=b.match($)){for(var g=[],d=[],h=0,j;j=e[h];h++)(f=j.match(da))?d.push([f[1]||"",f[2]]):g.push(j);b=g.join(" ")}break;case "style":g=[];d=[];if(e=b.match(ea))for(h=0;j=e[h];h++)f=j.match(ga),j=f[1],b=f[2].trim(),f=b.split(ia),1<f.length?(f=c(f),f.push(j),d.push(f)):g.push(j+": "+b.replace(V,ba));g.push("");b=g.join(";");break;default:e=b.split(oa),1<e.length?d=c(e):b=b.replace(V,
ba)}d&&!d.length&&(d=0);return{binding:d,value:b,type:T[a]||2}},t=function(a,b,c){a=a.attrs;for(var d=[],e,f=0,g;g=a[f];f++)if("b"==g.prefix)switch(g.name){case "ref":g=(g.value||"").trim().split(/\s+/);for(e=0;e<g.length;e++)S(b,g[e])}else if(e=g.name.match(/^event-(.+)$/))d.push(e[1]==g.value?[6,e[1]]:[6,e[1],g.value]);else{e=R(g.name,g.value);var h=[e.type,e.binding,Ca(g)];2==e.type&&h.push(Ba(g));e.value&&(!c||!e.binding||2!=e.type)&&h.push(e.value);d.push(h)}return d.length?d:0},S=function(a,
b){a[2]||(a[2]=[]);K(a[2],b);"element"!=b&&(a[y]=1==a[2].length?b:0)},ya=function(a,b){var c=a[2].indexOf(b);if(-1!=c){var d=a[y]&&"number"==typeof a[y];a[2].splice(c,1);d&&c==a[y]-1&&(a[y]=b);a[2].length?d&&(a[y]-=c<a[y]-1):a[2]=0}},H=function(a){var b={};if(a.attrs)for(var c=0,d;d=a.attrs[c];c++)b[Ba(d)]=d.value;return b},xb=function(a,b){for(var c=0;c<b.length;c++)K(a,b[c])},Aa=function(a,d,e){function g(a,b,c){a=H(a);b&&(a.name=b);if(a.name&&Y.test(a.name)){var d=D[a.ref||"element"];if(d&&d.token[z]==
B){b=d.token;var f=T[a.name],k=u-!!f,h=b&&C(b,a.name,function(a){return f?N[a[z]]:a[G]});!h&&"remove"!=c&&(h=[f||w,0,0],f||h.push(a.name),h.push(""),b||(b=[],d.token.push(b)),b.push(h));d="class"==a.name||"style"==a.name;switch(c){case "set":c=R(a.name,a.value);h[y]=c.binding;!e.optimizeSize||!h[y]||d?h[k]=c.value||"":h.length=k;if(d&&!h[y]&&!h[k]){L(b,h);break}break;case "append":c=R(a.name,a.value);if(c.binding){var j=h[y];if(j){if("style"==a.name){for(var ra={},l=0,m;m=c.binding[l];l++)ra[m[2]]=
!0;m=l=0;for(var s;s=j[l];l++)ra[s[2]]||(j[m++]=s);j.length=m}j.push.apply(j,c.binding)}else h[y]=c.binding}c.value&&(h[k]+=(h[k]&&"class"==a.name?" ":"")+c.value);if(d&&!h[y]&&!h[k]){L(b,h);break}break;case "remove":h&&L(b,h)}}}}for(var h=[],j=0,k,s;k=a[j];j++){var m=Ca(k),l=m&&1==m.length?m[0]:0;switch(k.type){case B:if("b"==k.prefix){var r=H(k);switch(k.name){case "resource":case "style":r.src&&d.resources.push(x.resolve(d.baseURI+r.src));break;case "l10n":r.src&&(d.dictURI=x.relative(b.path.baseURI,
d.baseURI+r.src));break;case "define":if("name"in r&&!d.defines[r.name])switch(r.type){case "bool":d.defines[r.name]=["true"==r["default"]?1:0];break;case "enum":k=r.values?r.values.trim().split(" "):[],d.defines[r.name]=[k.indexOf(r["default"])+1,k]}break;case "text":k=k.childs[0];a[j--]=b.object.extend(k,{refs:(r.ref||"").trim().split(/\s+/),value:"notrim"in r?k.value:k.value.replace(/^\s*[\r\n]+|[\r\n]\s*$/g,"")});break;case "include":if(l=r.src){l=(m=/^#\d+$/.test(l))?l.substr(1):l;l=m?aa[l]:
/^[a-z0-9\.]+$/i.test(l)&&!/\.tmpl$/.test(l)?n(l):b.resource(x.resolve(d.baseURI+l));if(!l)continue;if(-1==ka.indexOf(l)){K(d.deps,l);ka.push(l);m?(l.source.bindingBridge&&K(d.deps,l.source),m=f(l.source,l.baseURI,!0,e)):m=f(l.get(),l.url?x.dirname(l.url)+"/":"",!0,e);ka.pop();m.resources&&!1=="no-style"in r&&xb(d.resources,m.resources);m.deps&&xb(d.deps,m.deps);var D=P(m.tokens),l=(k.childs||[]).slice();r["class"]&&l.push({type:B,prefix:"b",name:"append-class",attrs:[{type:w,name:"value",value:r["class"]}]});
r.id&&l.push({type:B,prefix:"b",name:"set-attr",attrs:[{type:w,name:"name",value:"id"},{type:w,name:"value",value:r.id}]});r.ref&&D.element&&r.ref.trim().split(/\s+/).map(function(a){S(D.element.token,a)});for(var r=0,v;v=l[r];r++)if(v.type==B&&"b"==v.prefix)switch(v.name){case "replace":case "before":case "after":var E=H(v);if(k=E.ref&&D[E.ref]){var E=k.owner.indexOf(k.token),q;-1!=E&&(E+="after"==v.name,q="replace"==v.name,k.owner.splice.apply(k.owner,[E,q].concat(Aa(v.childs,d,e)||[])))}break;
case "prepend":case "append":E=H(v);if((k=(k=(k="ref"in E?E.ref:"element")&&D[k])&&k.token)&&k[z]==B)E=Aa(v.childs,d,e)||[],"prepend"==v.name?k.splice.apply(k,[4,0].concat(E)):k.push.apply(k,E);break;case "attr":case "set-attr":g(v,!1,"set");break;case "append-attr":g(v,!1,"append");break;case "remove-attr":g(v,!1,"remove");break;case "class":case "append-class":g(v,"class","append");break;case "set-class":g(v,"class","set");break;case "remove-class":g(v,"class","remove");break;case "add-ref":E=H(v);
(k=(k=(k="ref"in E?E.ref:"element")&&D[k])&&k.token)&&E.name&&S(k,E.name);break;case "remove-ref":E=H(v),(k=(k=(k="ref"in E?E.ref:"element")&&D[k])&&k.token)&&ya(k,E.name||E.ref)}else m.tokens.push.apply(m.tokens,Aa([v],d,e)||[]);D.element&&ya(D.element.token,"element");h.push.apply(h,m.tokens)}}}continue}s=[1,l,m,Ba(k)];s.push.apply(s,t(k,s,e.optimizeSize)||[]);s.push.apply(s,Aa(k.childs,d,e)||[]);break;case 3:m&&(2==m.length&&C(m,"element"))&&(l=m[+!m.lastSearchIndex]);if(l&&(r=Xa(l,d.dictURI).split(/[:@\{]/),
"l10n"==r[0]&&3==r.length))if(r[2]){if(r=r.slice(1).join("@"),r=b.l10n.token(r),v=c(r),d.l10nResolved=!0,v&&"markup"==r.type){a[j--]=p('<b:include src="#'+v.templateId+'"/>')[0];continue}}else L(m,l),0==m.length&&(m=null),l=0,k.value=k.value.replace(/\}$/,"@undefined}");s=[3,l,m];(!m||k.value!="{"+m.join("|")+"}")&&s.push(k.value.replace(V,ba));break;case 8:if(e.optimizeSize&&!l&&!m)continue;s=[8,l,m];e.optimizeSize||(!m||k.value!="{"+m.join("|")+"}")&&s.push(k.value.replace(V,ba))}for(;0===s[s.length-
1];)s.pop();h.push(s)}return h.length?h:0},Xa=function(a,b){if("string"!=typeof a)return a;var c=a.split(":");2==c.length&&("l10n"==c[0]&&-1==c[1].indexOf("@"))&&(c[1]=c[1]+"@"+b);return c.join(":")},P=function(a,b,c,d){c||(c={});d=d||0;for(var e;e=a[d];d++)if(6!=e[z]){var f=e[2];if(f)for(var g=f.length-1,k;k=f[g];g--)-1!=k.indexOf(":")?ya(e,k):(c[k]&&ya(c[k].token,k),e[y]==k&&(e[y]=g+1),c[k]={owner:a,token:e});switch(e[z]){case 3:e[y]=Xa(e[y],b);break;case w:if(e[y]){e=e[y][0];for(g=0;g<e.length;g++)e[g]=
Xa(e[g],b)}break;case B:P(e,b,c,4)}}return c},yb=function(a,b,c,d){var e=0;d=d||0;for(var f;f=a[d];d++)if(f[z]==B&&(e+=yb(f,b,c,4)),4==f[z]||f[z]==w&&"class"==f[G]){var g=f[y],k=u-(4==f[z]);if(g){for(var h=(f[k]||"").trim().split(" "),j=0,l;l=g[j];j++)if(!(2<l.length)){var m=l[1].split(":").pop(),s=b.defines[m];s?(l.push.apply(l,s),s.used=!0,s[0]&&(1==s.length?K(h,l[0]+m):K(h,l[0]+s[1][s[0]-1]))):e++}f[k]=h.join(" ");c.optimizeSize&&!f[k]&&(f.length=k)}}return e},Y=/^[a-z_][a-z0-9_\-]*$/i,$=/(\S+)/g,
da=/^([a-z_][a-z0-9_\-]*)?\{((anim:)?[a-z_][a-z0-9_\-]*)\}$/i,ea=/\s*[^:]+?\s*:(?:\(.*?\)|".*?"|'.*?'|[^;]+?)+(?:;|$)/gi,ga=/\s*([^:]+?)\s*:((?:\(.*?\)|".*?"|'.*?'|[^;]+?)+);?$/i,ia=/\{([a-z_][a-z0-9_]*)\}/i,oa=/\{([a-z_][a-z0-9_]*|l10n:[a-z_][a-z0-9_]*(?:\.[a-z_][a-z0-9_]*)*(?:\.\{[a-z_][a-z0-9_]*\})?)\}/i,V=/&([a-z]+|#[0-9]+|#x[0-9a-f]{1,4});?/gi,fa=b.NODE_ENV?require("./template/htmlentity.json"):{},ha=!b.NODE_ENV?document.createElement("div"):null,ka=[];J=function(a,c,d,e){d=d||{};var f=[],g=
{sourceUrl:e,baseURI:c||"",tokens:null,resources:[],deps:[],defines:{},unpredictable:!0,warns:f};g.dictURI=e?b.path.relative(b.path.baseURI,g.baseURI+b.path.basename(e,b.path.extname(e))+".l10n"):c||"";a.templateTokens?a.warns&&f.push.apply(f,a.warns):a=p(""+a);g.tokens=Aa(a,g,d);g.tokens||(g.tokens=[[3,0,0,""]]);S(g.tokens[0],"element");P(g.tokens,g.dictURI);g.unpredictable=!!yb(g.tokens,g,d);delete g.defines;delete g.l10nResolved;f.length||(g.warns=!1);return g};var pa={".css":!0},Z=q(null,{className:g+
".Template",__extend__:function(a){return a instanceof Z?a:a instanceof na?new ua(a):new Z(a)},source:"",baseURI:"",init:function(a){if(4096==aa.length)throw 8;this.attaches_=[];this.setSource(a||"");this.templateId=aa.push(this)-1},bindingBridge:{attach:function(a,b,c){for(var d=0,e;e=a.attaches_[d];d++)if(e.handler==b&&e.context==c)return;a.attaches_.push({handler:b,context:c})},detach:function(a,b,c){for(var d=0,e;e=a.attaches_[d];d++)if(e.handler==b&&e.context==c){a.attaches_.splice(d,1);break}},
get:function(){}},createInstance:function(a,b,c,d,e){j.call(this);return this.createInstance(a,b,c,d,e)},clearInstance:function(){},getBinding:function(a){j.call(this);return this.getBinding(a)},setSource:function(a){var c=this.source;if(c!=a){if("string"==typeof a){var e=a.match(/^([a-z]+):/);if(e){var f=e[1];a=a.substr(e[0].length);switch(f){case "file":a=b.resource(a);break;case "id":var g=a;a=function(){var a=document.getElementById(g);return a&&"SCRIPT"==a.tagName&&"text/basis-template"==a.type?
a.textContent||a.text:""};break;case "tokens":a=b.string.toObject(a);a.isDecl=!0;break;case "path":a=n(a)}}}if(c&&c.bindingBridge){if(e=c.url&&F[c.url])L(e,this),e.length||delete F[c.url];this.baseURI="";this.source.bindingBridge.detach(c,d,this)}a&&a.bindingBridge&&(a.url&&(this.baseURI=x.dirname(a.url)+"/",F[a.url]||(F[a.url]=[]),K(F[a.url],this)),a.bindingBridge.attach(a,d,this));this.source=a;d.call(this)}},destroy:function(){this.destroyBuilder&&this.destroyBuilder();this.source=this.resources=
this.getBinding=this.createInstance=this.attaches_=null}}),na=function(a){b.object.extend(this,a)},ua=b.Class(null,{className:g+".TemplateSwitcher",ruleRet_:null,templates_:null,templateClass:Z,ruleEvents:null,rule:String,init:function(a){this.ruleRet_=[];this.templates_=[];this.rule=a.rule;if((a=a.events)&&a.length){this.ruleEvents={};for(var b=0,c;c=a[b];b++)this.ruleEvents[c]=!0}A.add(this)},resolve:function(a){a=this.rule(a);var b=this.ruleRet_.indexOf(a);-1==b&&(this.ruleRet_.push(a),b=this.templates_.push(new this.templateClass(a))-
1);return this.templates_[b]},destroy:function(){this.ruleRet_=this.templates_=this.rule=null}}),va=q(null,{className:g+".Theme",get:n}),ja=q(b.Token,{className:g+".SourceWrapper",path:"",url:"",baseURI:"",init:function(a,c){this.path=c;b.Token.prototype.init.call(this,"")},get:function(){return this.value&&this.value.bindingBridge?this.value.bindingBridge.get(this.value):this.value},set:function(){var a=D(ta,this.path);this.value!=a&&(this.value&&this.value.bindingBridge&&this.value.bindingBridge.detach(this.value,
ja.prototype.apply,this),this.url=(this.value=a)&&a.url||"",this.baseURI=("object"==typeof a||"function"==typeof a)&&"baseURI"in a?a.baseURI:x.dirname(this.url)+"/",this.value&&this.value.bindingBridge&&this.value.bindingBridge.attach(this.value,ja.prototype.apply,this),this.apply())},destroy:function(){this.baseURI=this.url=null;this.value&&this.value.bindingBridge&&this.value.bindingBridge.detach(this.value,this.apply,this);b.Token.prototype.destroy.call(this)}}),M={},sa={},wa=h(),ta="base",xa=
[];A.add({destroy:function(){for(var a in sa)sa[a].destroy();sa=M=null;a=0;for(var b;b=aa[a];a++)b.destroy();aa=null}});a.exports={DECLARATION_VERSION:2,TYPE_ELEMENT:B,TYPE_ATTRIBUTE:w,TYPE_ATTRIBUTE_CLASS:4,TYPE_ATTRIBUTE_STYLE:5,TYPE_ATTRIBUTE_EVENT:6,TYPE_TEXT:3,TYPE_COMMENT:8,TOKEN_TYPE:z,TOKEN_BINDINGS:y,TOKEN_REFS:2,ATTR_NAME:G,ATTR_VALUE:u,ATTR_NAME_BY_TYPE:N,ELEMENT_NAME:3,ELEMENT_ATTRS:4,ELEMENT_CHILDS:5,TEXT_VALUE:3,COMMENT_VALUE:3,L10nProxyToken:za,TemplateSwitchConfig:na,TemplateSwitcher:ua,
Template:Z,SourceWrapper:ja,switcher:function(a,c){var d=b.array(arguments);c=d.pop();return new na({rule:c,events:d.join(" ").trim().split(/\s+/)})},tokenize:p,getDeclFromSource:f,makeDeclaration:J,getL10nTemplate:c,Theme:va,theme:h,getThemeList:function(){return b.object.keys(M)},currentTheme:function(){return M[ta].theme},setTheme:function(a){return h(a).apply()},onThemeChange:function(a,b,c){xa.push({fn:a,context:b});c&&a.call(b,ta)},define:wa.define,get:n,getPathList:function(){return b.object.keys(sa)}}},
"6.js":function(g,a,b){b.require("5.js");var c=b.template.TYPE_ELEMENT,d=b.template.TYPE_ATTRIBUTE,e=b.template.TYPE_TEXT,f=b.template.TYPE_COMMENT,j=b.template.TOKEN_TYPE,n=b.template.TOKEN_BINDINGS,l=b.template.TOKEN_REFS,D=b.template.ATTR_NAME,h=b.template.ATTR_NAME_BY_TYPE,q=b.template.ELEMENT_NAME,x=b.template.ELEMENT_ATTRS,A={},C,K=function(a,b){for(var c=0,d;d=a[c];c++)-1==d.indexOf(":")&&w.push(d+":"+b)},L=function(a){var b=B.length,b=F[b]||"r"+b;B.push(b+"="+a);return b},P=function(a,b,d){for(var g,
s,u,A,p=0,m=0,C=0,J;J=a[p];p++,m++,A=!1){p?a[p+1]?(J[j]==a[p-1][j]&&J[j]==e&&C++,g=b+".childNodes["+(d?m:m+(C?" + "+C+" * TEXT_BUG":""))+"]"):g=b+".lastChild":g=b+".firstChild";if(s=J[l])A=!0,g=L(g),K(s,g);J[n]&&(J[n]&&"number"==typeof J[n]&&(J[n]=J[l][J[n]-1]),A||(A=!0,g=L(g)),z.push([J[j],g,J[n]]));if(J[j]==c){u=-1;b==G&&y.push(g+".basisTemplateId");A||(g=L(g),u=B.length);for(var I=[],w=[],F=x,R;R=J[F];F++)R[j]==c||R[j]==e||R[j]==f?w.push(R):I.push(R);for(var F=0,t;t=I[F];F++)if(6!=t[j]){R=h[t[j]]||
t[D];if(s=t[l])A=!0,K(s,L(g+'.getAttributeNode("'+R+'")'));if(s=t[n])switch(A=!0,R){case "class":t=0;for(var S;S=s[t];t++)S=[2,g,S[1],R,S[0]].concat(S.slice(2)),z.push(S);break;case "style":for(t=0;S=s[t];t++)for(var ya=0,H;H=S[0][ya];ya++)z.push([2,g,H,R,S[0],S[1],S[2]]);break;default:for(t=0;H=s[0][t];t++)z.push([2,g,H,R,s[0],s[1],J[q]])}}w.length&&P(w,g,d);!A&&u==B.length&&B.pop()}}},F="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),B,w,z,y,G;C=function(a,b,c){B=[];w=[];z=[];y=
[];G=b||"_";P(a,G,c);return{path:B,ref:w,binding:z,markedElementList:y}};var u,N=function(a,b,c){var d=[],e=a[5];a=a[4];for(var f,g,h=0;h<e.length;h++)if("string"==typeof e[h])d.push('"'+e[h].replace(/"/g,'\\"')+'"');else if(f=a[e[h]],g=f.indexOf(":"),-1==g)d.push("l10n"==b?'"{'+f+'}"':"bool"==b?"(__"+f+'||"")':"__"+f);else{var j=null,l=f.substr(g+1).replace(T,function(a,b){j=b;return""});j?d.push(c[f.substr(g+1)]):d.push('__l10n["'+l+'"]')}1==d.length&&d.push('""');return d.join("+")},T=/\.\{([a-zA-Z_][a-zA-Z0-9_\-]*)\}/,
I={disabled:"*",checked:["input"],value:["input","textarea"],minlength:["input"],maxlength:["input"],readonly:["input"],selected:["option"]},Q={disabled:!0,checked:!0,selected:!0,readonly:!0},O={1:"bind_element",3:"bind_textNode",8:"bind_comment"};u=function(a){function f(a){A[a]=!0;h.push(j+"="+a+"("+b.array(arguments,1)+");")}for(var g={},h,j,l=[],n=[],p,m,u=[],q={},y=1,A={resolve:!0},x,C=0,t;t=a[C];C++){var B=t[0],z=t[1],H=t[2];if(-1==["set","templateId_"].indexOf(H)){var w=H.split(":");(x="anim"==
w[0])&&(H=w[1]);h=g[H];j="_"+C;p="__"+H;if("l10n"==w[0]&&w[1]){var w=w[1],F=null,G=w.replace(T,function(a,b){F=b;return""});if(F){!1==w in q&&(p="$l10n_"+y++,q[w]=p,u.push('set("'+p+'",'+p+")"),l.push(p+'=tools.l10nToken("'+G+'").computeToken()'),h=g[F],h||(h=g[F]=[],l.push("__"+F)),h.push(p+".set(__"+F+");"));H=q[w];j="_"+C;p="__"+H;h=g[H];h||(h=g[H]=[],l.push(p));B==e?(l.push(j+"="+z),f(O[B],z,j,"value")):(p='"'+t[D]+'"',l.push(j),f("bind_attr",z,p,j,N(t,!1,q)));continue}m||(m={});g[G]||(g[G]=[],
m[G]=[]);h=g[G];h.l10n=!0;if(B==e){m[G].push(z+".nodeValue=value;");h.push(z+'.nodeValue=__l10n["'+G+'"]'+(F?"[__"+F+"]":"")+";");continue}else m[G].push("bind_attr("+[z,'"'+t[D]+'"',"NaN",N(t,"l10n",q)]+");")}h||(h=g[H]=[],l.push(p));if(B!=d)if(h.nodeBind)switch(B){case c:f(O[B],z,z,"value!==null?String(value):null");break;case e:h.push(z+".nodeValue=value;")}else l.push(j+"="+z),f(O[B],z,j,"value"),h.nodeBind=j;else switch(p=t[D],p){case "class":p="";w="value";B=t[4];w=t.length;if(6<=w)if(6==w||
"string"==typeof t[6])6==w?(w='value?"'+H+'":""',t[5]&&(p=B+H)):(B="",w='value?"'+t[6]+'":""',t[5]&&(p=t[6]));else{if(!t[6].length)continue;7==w?(w=t[6].map(function(a){return'value=="'+a+'"'}).join("||")+'?value:""',t[5]&&(p=B+t[6][t[5]-1])):(B="",w=t[6].map(function(a,b){return'value=="'+a+'"?"'+this[b]+'"'},t[7]).join(":")+':""',t[5]&&(p=t[7][t[5]-1]))}else w='typeof value=="string"||typeof value=="number"?value:(value?"'+H+'":"")';l.push(j+'="'+p+'"');f("bind_attrClass",z,j,w,'"'+B+'"',x);break;
case "style":l.push(j+'=""');f("bind_attrStyle",z,'"'+t[6]+'"',j,N(t,!1,q));break;default:if(x=I[p],l.push(j+"="+N(t,"l10n",q)),f("bind_attr",z,'"'+p+'"',j,x&&Q[p]?N(t,"bool",q)+'?"'+p+'":""':N(t,!1,q)),x&&("*"==x||-1!=x.indexOf(t[6].toLowerCase())))h.push("if("+z+"."+p+"!="+j+")"+z+"."+p+"="+(Q[p]?"!!"+j:j)+";")}}}n.push(';function set(bindName,value){if(typeof bindName=="string")value=resolve.call(instance,bindName,value,Attaches);switch(bindName){');for(H in g)n.push('case"'+H+'":'+(g[H].nodeBind?
"case "+g[H].nodeBind+":":"")+(g[H].l10n?g[H].join(""):"if(__"+H+"!==value){__"+H+"=value;"+g[H].join("")+"}")+"break;");n.push("}}");a=[];for(var K in A)a.push(K+"=tools."+K);return{keys:b.object.keys(g).filter(function(a){return-1==a.indexOf("@")}),tools:a,vars:l,set:n.join(""),l10n:m,l10nCompute:u}};a.exports={getFunctions:function(a,c,d,e,f){if(c=A[d&&b.path.relative(d)])return c;a=C(a,"_",f);f=u(a.binding);c=a.markedElementList.join("=");d={keys:f.keys,l10nKeys:b.object.keys(f.l10n)};if(f.l10n){e=
[];for(var g in f.l10n)e.push('case"'+g+'":if(value==null)value="{'+g+'}";__l10n[token]=value;'+f.l10n[g].join("")+"break;");d.createL10nSync=new Function("_","__l10n","bind_attr","TEXT_BUG","var "+a.path+";return function(token, value){switch(token){"+e.join("")+"}}\n")}d.createInstance=new Function("tid","map","build","tools","__l10n","TEXT_BUG","var getBindings=tools.createBindingFunction(["+f.keys.map(function(a){return'"'+a+'"'})+"]),"+(f.tools.length?f.tools+",":"")+"Attaches=function(){};Attaches.prototype={"+
f.keys.map(function(a){return a+":null"})+"};return function createInstance_(id,obj,onAction,onRebuild,bindings,bindingInterface){var _=build(),"+a.path.concat(f.vars)+",instance={context:obj,action:onAction,rebuild:onRebuild,handler:null,bindings:bindings,bindingInterface:bindingInterface,attaches:null,tmpl:{"+[a.ref,"templateId_:id","set:set"]+"}}"+(c?";if(obj||onAction)"+c+"=(id<<12)|tid":"")+f.set+";instance.handler=bindings?getBindings(bindings,obj,set,bindingInterface):null;"+f.l10nCompute+
";return instance}");return d}}}},q=this,C=function(g,a){for(var b in a)g[b]=a[b];return g},P=function(g,a){for(var b in a)!1==b in g&&(g[b]=a[b]);return g},zb=function(g,a){var b={};if(!a)return C(b,g);for(var c=0,d;d=a[c++];)d in g&&(b[d]=g[d]);return b},Ya=function(){return da(arguments).reduce(C,{})},Ab=function(g,a,b){var c=[],d;for(d in g)c.push(a.call(b,d,g[d]));return c},Za=function(g){return g},Q=function(){},$a=function(g,a){if(ea.extProto)for(var b in a)g.prototype[b]=function(b){return function(){var d=
[this];Array.prototype.push.apply(d,arguments);return a[b].apply(a,d)}}(b,g.name)},da=function(g,a){if(null!=g){var b=g.length;if("undefined"==typeof b||"[object Function]"==Ia.call(g))return[g];a||(a=0);if(0<b-a){for(var c=[],d=0,e=a;e<b;)c[d++]=g[e++];return c}}return[]},Bb=function(g,a,b){for(var c=[],d="function"==typeof a,e=0;e<g;e++)c[e]=d?a.call(b,e,c):a;return c},x=q.document,Ia=Object.prototype.toString,Y,Yb=1,Zb=/^[a-z$_][a-z$_0-9]*(\.[a-z$_][a-z$_0-9]*)*$/i,Ja=[],Cb={},Db={};Y=function(g,
a){var b,c,d;if(!g||g===ab)return ab;if("function"==typeof g)(d=g.basisGetterId_)?b=Ja[Math.abs(d)-1]:(b=function(a){return g(a)},b.base=g,b.__extend__=Y,d=Ja.push(b),g.basisGetterId_=-d,b.basisGetterId_=d);else if(b=Cb[g])d=b.basisGetterId_;else{if(Zb.test(g)){var e=g.split("."),f=e[0],j=e[1],n=e[2];switch(e.length){case 1:d=function(a){return null!=a?a[f]:a};break;case 2:d=function(a){return null!=a?a[f][j]:a};break;case 3:d=function(a){return null!=a?a[f][j][n]:a};break;default:d=function(a){if(null!=
a){a=a[f][j][n];for(var b=3,c;c=e[b];b++)a=a[c]}return a}}b=d}else b=new Function("object","return object != null ? object."+g+" : object");b.base=g;b.__extend__=Y;d=Ja.push(b);b.basisGetterId_=d;Cb[g]=b}c=null!=a&&typeof a;if(!c)return b;var l=Db[d],q;if("string"==c)q=c+a;else if("function"==c)q=a.basisModId_;else if("object"!=c)return b;if(q&&l&&l[q])return l[q];"function"==typeof b.base&&(b=b.base);switch(c){case "string":c=function(c){return Ka.format(a,b(c))};break;case "function":q||(q=c+Yb++,
a.basisModId_=q);c=function(c){return a(b(c))};break;default:c=function(c){return a[b(c)]}}c.base=b.base||b;c.__extend__=Y;q&&(l||(l={},Db[d]=l),l[q]=c,c.mod=a,c.basisGetterId_=Ja.push(c));return c};var ab=C(function(){},{__extend__:Y}),La={log:Q,info:Q,warn:Q,error:Q};"undefined"!=typeof console&&Ab(La,function(g){La[g]="bind"in Function.prototype&&"function"==typeof console[g]?Function.prototype.bind.call(console[g],console):function(){Function.prototype.apply.call(console[g],console,arguments)}});
var ia=q.setImmediate||q.msSetImmediate,na=q.clearImmediate||q.msSetImmediate;ia&&(ia=ia.bind(q));na&&(na=na.bind(q));if(!ia){var fa,Ma={},bb=1,ia=function(){Ma[++bb]={fn:arguments[0],args:da(arguments,1)};ga(bb);return bb},na=function(g){delete Ma[g]};fa=function(g){var a=Ma[g];if(a)try{"function"==typeof a.fn?a.fn.apply(void 0,a.args):(q.execScript||function(a){q.eval.call(q,a)})(String(a.fn))}finally{delete Ma[g]}};var cb=function(g){setTimeout(function(){fa(g)},0)},ga=cb;if(q.process&&"function"==
typeof process.nextTick)ga=function(g){process.nextTick(function(){fa(g)})};else if(q.MessageChannel)ga=function(g){var a=new q.MessageChannel;a.port1.onmessage=function(){fa(g)};a.port2.postMessage("")};else{var db=q.postMessage&&!q.importScripts;if(db){var $b=q.onmessage;q.onmessage=function(){db=!1};q.postMessage("","*");q.onmessage=$b}if(db){var Eb=function(g){g&&g.source==q&&(g=String(g.data).split("basisjs.setImmediate")[1])&&fa(g)};q.addEventListener?q.addEventListener("message",Eb,!0):q.attachEvent("onmessage",
Eb);ga=function(g){q.postMessage("basisjs.setImmediate"+g,"*")}}else x&&"onreadystatechange"in x.createElement("script")&&(ga=function a(b){"undefined"!=typeof L&&(ga=cb,L.head.ready(function(){ga=function(a){var b=x.createElement("script");b.onreadystatechange=function(){fa(a);b.onreadystatechange=null;L.remove(b);b=null};L.head.add(b)}}));ga===a?cb(b):ga(b)})}}var Na="object"==typeof process&&"[object process]"==Ia.call(process),A,Fb="",ha,K={};if(Na){for(var ac="normalize dirname extname basename resolve relative".split(" "),
Gb=0,eb;eb=ac[Gb];Gb++)K[eb]=function(a,b){return function(){return b[a].apply(b,arguments).replace(/\\/g,"/")}}(eb,require("path"));ha=K.resolve(".")+"/"}else{var bc=/^([^\/]+:|\/)/,cc=/^([a-zA-Z0-9\-]+:)?\/\/[^\/]+/,dc=/[\?#].*$/,K={normalize:function(a){var b=[];a=(a||"").replace(cc,"").replace(dc,"").split("/");for(var c=0;c<a.length;c++)".."==a[c]?b.pop():(a[c]||!c)&&"."!=a[c]&&b.push(a[c]);return b.join("/")},dirname:function(a){return K.normalize(a).replace(/\/[^\/]*$/,"")},extname:function(a){return(a=
K.normalize(a).match(/\.[^\\\/]*$/))?a[0]:""},basename:function(a,b){var c=K.normalize(a).match(/[^\\\/]*$/),c=c?c[0]:"";b==K.extname(c)&&(c=c.substring(0,c.length-b.length));return c},resolve:function(a,b){for(var c=da(arguments).reverse(),d=[],e=!1,f=0;!e&&f<c.length;f++)"string"==typeof c[f]&&(d.unshift(c[f]),e=bc.test(c[f]));e||d.unshift("/"==ha?"":ha);return K.normalize(d.join("/"))},relative:function(a,b){"string"!=typeof b&&(b=a,a=ha);for(var c=K.normalize(b).split(/\//),d=K.normalize(a).split(/\//),
e=0;c[e]==d[e]&&"string"==typeof d[e];)e++;for(var f="",d=d.length-e;0<d;d--)f+="../";return f+c.slice(e).join("/")}};ha=location.pathname.replace(/[^\/]+$/,"");Fb=location.protocol+"//"+location.host}K.baseURI=ha;K.origin=Fb;A=K;var ea={noConflict:!0,autoload:"0.js"},ua,fb=function(a){return"function"==typeof a&&!!a.basisClassId_},ec=function(a){for(var b=this;b&&b!==a;)b=b.superClass_;return b===a},hb=function(a,b){var c=fc++;"function"!=typeof a&&(a=gb);var d=function(){};d.prototype=a.prototype;
for(var d=new d,c={basisClassId_:c,superClass_:a,extendConstructor_:!!a.extendConstructor_,isSubclassOf:ec,subclass:function(){return hb.apply(null,[j].concat(da(arguments)))},extend:gc,__extend__:function(a){return a&&a!==ib&&("object"==typeof a||"function"==typeof a&&!fb(a))?gb.create.call(null,j,a):a},prototype:d},e=1,f;f=arguments[e];e++)c.extend(f);var j=c.extendConstructor_?function(a){this.basisObjectId=Hb.id++;var b,c;for(c in a)b=this[c],this[c]=b&&b.__extend__?b.__extend__(a[c]):a[c];this.init();
this.postInit()}:function(){this.basisObjectId=Hb.id++;this.init.apply(this,arguments);this.postInit()};d.constructor=j;for(var n in d)d[n]===ib&&(d[n]=j);C(j,c);return j},gc=function(a){var b=this.prototype;"function"==typeof a&&!fb(a)&&(a=a(this.superClass_.prototype));a.prototype&&(a=a.prototype);for(var c in a){var d=a[c],e=b[c];"className"==c||"extendConstructor_"==c?this[c]=d:b[c]=e&&e.__extend__?e.__extend__(d):d}if(jb&&a[c="toString"]!==Ia)b[c]=a[c];return this},Hb={id:1},fc=1,ib={},jb;a:{for(var rc in{toString:1}){jb=
!1;break a}jb=!0}var gb=C(hb,{className:"basis.Class",extendConstructor_:!1,prototype:{basisObjectId:0,constructor:null,init:function(){},postInit:function(){},destroy:function(){for(var a in this)hasOwnProperty.call(this,a)&&(this[a]=null);this.destroy=Q}}}),kb=function(a,b){return{__extend__:function(a){if(!a||a&&a.__extend__)return a;var d=function(){};d.prototype=this;d=new d;b(d,a);return d}}.__extend__(a||{})},Ib=function(a){return kb(a,C,"extensibleProperty")};ua=C(gb,{SELF:ib,create:hb,isClass:fb,
customExtendProperty:kb,extensibleProperty:Ib,nestedExtendProperty:function(a){return kb(a,function(a,c){for(var d in c){var e=a[d];a[d]=e&&e.__extend__?e.__extend__(c[d]):Ib(c[d])}},"nestedExtendProperty")},oneFunctionProperty:function(a,b){var c=function(b){var e={__extend__:c};if(b){if(b.__extend__)return b;for(var f in b)b[f]&&(e[f]=a)}return e};return c(b||{})}});var lb=ua(null,{className:"basis.Token",value:null,handler:null,deferredToken:null,bindingBridge:{attach:function(a,b,c){a.attach(b,
c)},detach:function(a,b,c){a.detach(b,c)},get:function(a){return a.get()}},init:function(a){this.value=a},get:function(){return this.value},set:function(a){this.value!==a&&(this.value=a,this.apply())},attach:function(a,b){this.handler={fn:a,context:b,handler:this.handler}},detach:function(a,b){for(var c=this,d;d=c,c=c.handler;)if(c.fn===a&&c.context===b){c.fn=Q;d.handler=c.handler;break}},apply:function(){for(var a=this.get(),b=this;b=b.handler;)b.fn.call(b.context,a)},deferred:function(){var a=this.deferredToken;
a||(a=this.deferredToken=new va.DeferredToken(this.value),this.attach(a.set,a));return a},destroy:function(){this.deferredToken&&(this.deferredToken.destroy(),this.deferredToken=null);this.value=this.handler=null}}),Jb,hc=function(){var a=Oa;Oa={};Kb=null;for(var b in a)a[b].apply()},Oa={},Kb;Jb=function(a){a.basisObjectId in Oa||(Oa[a.basisObjectId]=a,Kb||ia(hc))};var ic=lb.subclass({className:"basis.DeferredToken",set:function(a){this.value!==a&&(this.value=a,Jb(this))},deferred:function(){return this}}),
ja={},oa={};if("undefined"!=typeof Ha){for(var Lb in Ha)oa[A.resolve(Lb)]=Ha[Lb];Ha=null}var Pa=function(a,b){if(b||!oa.hasOwnProperty(a)){var c="";if(Na)try{c=require("fs").readFileSync(a,"utf-8")}catch(d){}else{var e=new XMLHttpRequest;e.open("GET",a,!1);e.setRequestHeader("If-Modified-Since",(new Date(0)).toGMTString());e.setRequestHeader("X-Basis-Resource",1);e.send("");200<=e.status&&400>e.status&&(c=e.responseText)}oa[a]=c}return oa[a]},ka=function(a){a=A.resolve(a);if(!ja[a]){var b=ka.extensions[A.extname(a)],
c=!1,d=!1,e,f=function(){if(c)return e;var j=Pa(a);b?d||(d=!0,e=b(j,a)):e=j;c=!0;f.apply();return e};C(f,C(new lb,{url:a,fetch:function(){return f()},toString:function(){return"[basis.resource "+a+"]"},update:function(j){j=String(j);if(!c||j!=oa[a]){oa[a]=j;if(b){if(!d||!b.updatable)return;e=b(j,a)}else e=j;c=!0;f.apply()}},reload:function(){var b=oa[a],d=Pa(a,!0);d!=b&&(c=!1,f.update(d))},get:function(b){return b?Pa(a):f()},ready:function(a,d){if(c&&(a.call(d,f()),b&&!b.updatable))return;f.attach(a,
d);return f}}));ja[a]=f}return ja[a]},Qa=zb(ea.path);C(ka,{getFiles:function(){var a=[],b;for(b in ja)a.push(A.relative(b));return a},getSource:function(a){return Pa(A.resolve(a))},exists:function(a){return!!ja.hasOwnProperty(A.resolve(a))},extensions:{".js":function(a,b){var c=mb[b];if(!c){var d=!0,c=A.dirname(b)+"/"+A.basename(b,A.extname(b)),e;for(e in ea.path){var f=ea.path[e]+e+"/";if(b.substr(0,f.length)==f){d=!1;c=c.substr(ea.path[e].length);break}}c=c.replace(/\./g,"_").replace(/\//g,".");
d&&(c="implicit."+c)}if(!pa[c]){d=e=wa(c);a:{var f={path:e.path,exports:e.exports},j=A.dirname(b)+"/",n=a;f.exports||(f.exports={});if("function"!=typeof n)try{n=new Function("exports, module, basis, global",'var __filename = "'+b.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'";\nvar __dirname = basis.path.dirname(__filename);\nvar resource = function(url){ return basis.resource(__dirname + "/" + url); };\n"use strict";\n\n'+a)}catch(l){va.dev.error("Compilation error at "+b+("line"in l?":"+(l.line-
4):"")+": "+l);break a}n.call(f.exports,f.exports,f,va,q,b,j,function(a){return ka(j+a)})}d.exports=f.exports;e.exports&&e.exports.constructor===Object&&P(e,e.exports)}return pa[c].exports},".css":C(function(a,b){var c=nb.resources[b];c?c.updateCssText(a):c=new nb(b);return c},{updatable:!0}),".json":C(function(a){if("object"==typeof a)return a;var b;try{a=String(a),b=va.json.parse(a)}catch(c){}return b||null},{updatable:!0})}});var pa={},mb={};if("undefined"!=typeof Wa)for(var Mb in Wa){var jc=A.resolve(Mb);
mb[jc]=Wa[Mb]}var Nb=ua(null,{className:"basis.Namespace",init:function(a){this.name=a;this.exports={path:this.name}},toString:function(){return"[basis.namespace "+this.path+"]"},extend:function(a){C(this.exports,a);return P(this,a)}}),wa=function(a){a=a.split(".");var b;b=a[0];var c=pa[b];c||(c=pa[b]=new Nb(b),c.namespaces_={},c.namespaces_[b]=c,ea.noConflict||(q[b]=c));"bbt"==b&&!vb&&(vb=pa[b]);for(var c=b=c,d=1,e;e=a[d];d++){if(!c[e]){var f=a.slice(0,d+1).join(".");c[e]=new Nb(f);b.namespaces_[f]=
c[e]}c=c[e]}return pa[a.join(".")]=c},Ra;if(Na){var kc=A.dirname(module.filename)+"/",ob=module.constructor.prototype;Ra=function(a,b){if(!/[^a-z0-9_\.]/i.test(a)||".js"==A.extname(a)){var c=ob._compile,d=wa(a);ob._compile=function(a,b){this.basis=va;c.call(C(this,d),'var basis = module.basis;\nvar resource = function(filename){ return basis.require(__dirname + "/" + filename) };\n'+a,b)};var e=require(kc+a.replace(/\./g,"/"));(d.exports=e)&&e.constructor===Object&&P(d,e);ob._compile=c;return e}a=
A.resolve(b,a);return require(a)}}else Ra=function(a,b){if(!/[^a-z0-9_\.]/i.test(a)&&".js"!=A.extname(a)){var c=a,d=c.split(".")[0];a=c.replace(/\./g,"/")+".js";d==c&&(Qa[d]=Qa[c]||A.baseURI,mb[Qa[d]+a]=d);a=(Qa[d]||"")+a}else a=A.resolve(b,a);return ka(a).fetch()};P(Function.prototype,{bind:function(a){var b=this,c=da(arguments,1);return c.length?function(){return b.apply(a,c.concat.apply(c,arguments))}:function(){return b.apply(a,arguments)}}});P(Array,{isArray:function(a){return"[object Array]"===
Ia.call(a)}});P(Array.prototype,{indexOf:function(a,b){b=parseInt(b,10)||0;if(0>b)return-1;for(;b<this.length;b++)if(this[b]===a)return b;return-1},lastIndexOf:function(a,b){var c=this.length;b=parseInt(b,10);for(b=isNaN(b)||b>=c?c-1:(b+c)%c;0<=b;b--)if(this[b]===a)return b;return-1},forEach:function(a,b){for(var c=0,d=this.length;c<d;c++)c in this&&a.call(b,this[c],c,this)},every:function(a,b){for(var c=0,d=this.length;c<d;c++)if(c in this&&!a.call(b,this[c],c,this))return!1;return!0},some:function(a,
b){for(var c=0,d=this.length;c<d;c++)if(c in this&&a.call(b,this[c],c,this))return!0;return!1},filter:function(a,b){for(var c=[],d=0,e=this.length;d<e;d++)d in this&&a.call(b,this[d],d,this)&&c.push(this[d]);return c},map:function(a,b){for(var c=[],d=0,e=this.length;d<e;d++)d in this&&(c[d]=a.call(b,this[d],d,this));return c},reduce:function(a,b){var c=this.length,d=arguments.length;if(0==c&&1==d)throw 1;var e,f=0;1<d&&(e=b,f=1);for(d=0;d<c;d++)d in this&&(e=f++?a.call(null,e,this[d],d,this):this[d]);
return e}});var Z={flatten:function(a){return a.concat.apply([],a)},repeat:function(a,b){return Z.flatten(Bb(parseInt(b,10)||0,a))},search:function(a,b,c,d){a.lastSearchIndex=-1;c=Y(c||Za);d=parseInt(d,10)||0;for(var e=a.length;d<e;d++)if(c(a[d])===b)return a[a.lastSearchIndex=d]},lastSearch:function(a,b,c,d){a.lastSearchIndex=-1;c=Y(c||Za);var e=a.length;d=isNaN(d)||null==d?e:parseInt(d,10);for(e=d>e?e:d;0<e--;)if(c(a[e])===b)return a[a.lastSearchIndex=e]},add:function(a,b){return-1==a.indexOf(b)&&
!!a.push(b)},remove:function(a,b){var c=a.indexOf(b);return-1!=c&&!!a.splice(c,1)},has:function(a,b){return-1!=a.indexOf(b)},sortAsObject:function(a,b,c,d){b=Y(b);d=d?-1:1;return a.map(function(a,c){return{i:c,v:b(a)}}).sort(c||function(a,b){return d*(a.v>b.v||-(a.v<b.v)||(a.i>b.i?1:-1))}).map(function(b){return a[b.i]},a)}};$a(Array,Z);if(![1,2].splice(1).length){var lc=Array.prototype.splice;Array.prototype.splice=function(){var a=da(arguments);2>a.length&&(a[1]=this.length);return lc.apply(this,
a)}}var mc=/([\/\\\(\)\[\]\?\{\}\|\*\+\-\.\^\$])/g,nc=/\{([a-z\d_]+)(?::([\.0])(\d+)|:(\?))?\}/gi;P(String,{toLowerCase:function(a){return String(a).toLowerCase()},toUpperCase:function(a){return String(a).toUpperCase()},trim:function(a){return String(a).trim()},trimLeft:function(a){return String(a).trimLeft()},trimRight:function(a){return String(a).trimRight()}});P(String.prototype,{trimLeft:function(){return this.replace(/^\s+/,"")},trimRight:function(){return this.replace(/\s+$/,"")},trim:function(){return this.trimLeft().trimRight()}});
var Ka={toObject:function(a,b){try{return(new Function("return 0,"+a))()}catch(c){if(b)throw 2;}},repeat:function(a,b){return Array(parseInt(b,10)+1||0).join(a)},qw:function(a){return(a=a.trim())?a.split(/\s+/):[]},forRegExp:function(a){return a.replace(mc,"\\$1")},format:function(a,b){var c=da(arguments,1);"object"==typeof b&&C(c,b);return a.replace(nc,function(a,b,f,j,n){a=b in c?c[b]:n?"":a;return f&&!isNaN(a)?(a=Number(a),"."==f?a.toFixed(j):pb.lead(a,j)):a})},capitalize:function(a){return a.charAt(0).toUpperCase()+
a.substr(1).toLowerCase()},camelize:function(a){return a.replace(/-(.)/g,function(a,c){return c.toUpperCase()})},dasherize:function(a){return a.replace(/[A-Z]/g,function(a){return"-"+a.toLowerCase()})}};$a(String,Ka);if(11!="|||".split(/\|/).length+"|||".split(/(\|)/).length){var oc=String.prototype.split;String.prototype.split=function(a,b){if(!a||!1==a instanceof RegExp||""==a.source)return oc.apply(this,arguments);var c=[],d=0,e;for(a.global||(a=RegExp(a.source,/\/([mi]*)$/.exec(a)[1]+"g"));e=
a.exec(this);)e[0]=this.substring(d,e.index),c.push.apply(c,e),d=a.lastIndex;c.push(this.substr(d));return c}}if("2"!="12".substr(-1)){var pc=String.prototype.substr;String.prototype.substr=function(a,b){return pc.call(this,0>a?Math.max(0,this.length+a):a,b)}}var pb={fit:function(a,b,c){return!isNaN(b)&&a<b?Number(b):!isNaN(c)&&a>c?Number(c):a},lead:function(a,b,c){return(a+"").replace(/\d+/,function(a){return 1<(b-=a.length-1)?Array(b).join(c||0)+a:a})},group:function(a,b,c){return(a+"").replace(/\d+/,
function(a){return a.replace(/\d/g,function(e,f){return!f+(a.length-f)%(b||3)?e:(c||" ")+e})})},format:function(a,b,c,d,e,f){a=a.toFixed(b);if(c||f)a=a.replace(/(\d+)(\.?)/,function(a,b,d){return(c?Number(b).group(3,c):b)+(d?f||d:"")});d&&(a=a.replace(/^-?/,"$&"+(d||"")));return a+(e||"")}};$a(Number,pb);P(Date,{now:function(){return+new Date}});var qb,xa=function(){if("complete"==x.readyState&&x.body&&!rb++)for(;V;)V.callback.call(V.context),V=V.next},Ob=function(){try{x.documentElement.doScroll("left"),
xa()}catch(a){setTimeout(Ob,1)}},rb=!x||"complete"==x.readyState&&!!x.body,V;if(!rb)if(x.addEventListener)x.addEventListener("DOMContentLoaded",xa,!1),q.addEventListener("load",xa,!1);else{x.attachEvent("onreadystatechange",xa);q.attachEvent("onload",xa);try{!q.frameElement&&x.documentElement.doScroll&&Ob()}catch(sc){}}qb=function(a,b){rb?a.call(b):V={callback:a,context:b,next:V}};var L,sb=function(a){if(x&&!Da[a]&&(Da[a]=x[a]||x.getElementsByTagName(a)[0],Da[a])){var b=$[a];delete $[a];for(var c=
0,d;d=b[c];c++)d[0].call(d[1],Da[a])}return Da[a]},tb=function(){var a=this[0],b=this[1],c=this[2];Pb(b);var d=sb(a);if(d){!0===c&&(c=d.firstChild);if(!c||c.parentNode!==d)c=null;d.insertBefore(b,c)}else $[a].push([tb,[a,b,c]])},Pb=function(a){for(var b in $){var c=Z.search($[b],a,function(a){return a[1]&&a[1][1]});c&&Z.remove($[b],c)}a&&(a.parentNode&&1==a.parentNode.nodeType)&&a.parentNode.removeChild(a)},Rb=function(){sb("head")&&sb("body")&&clearInterval(Qb)},Qb,Da={},$={head:[],body:[]};x&&(Qb=
setInterval(Rb,5),qb(Rb));L={head:{ready:function(a,b){$.head?$.head.push([a,b]):a.call(b)},add:function(a,b){tb.call(["head",a,b])}},body:{ready:function(a,b){$.body?$.body.push([a,b]):a.call(b)},add:function(a,b){tb.call(["body",a,b])}},remove:Pb};var Sa;a:{var Sb=function(){Ta.globalDestroy=!0;Ta.add=Q;Ta.remove=Q;for(var a;a=Ua.pop();)if("function"==typeof a.destroy)try{a.destroy()}catch(b){}else for(var c in a)a[c]=null;Ua.length=0},Ua=[];if("attachEvent"in q)q.attachEvent("onunload",Sb);else if("addEventListener"in
q)q.addEventListener("unload",Sb,!1);else{Sa={add:Q,remove:Q};break a}var Ta={add:function(a){null!=a&&Ua.push(a)},remove:function(a){Z.remove(Ua,a)}};Sa=Ta}var nb,Tb=function(a){Va.setAttribute("href",a);L.head.add(Va,!0)},Ub=function(){Va.setAttribute("href",location.href);L.remove(Va)},qc=function(){Tb(this.baseURI);this.element||(this.element=x.createElement("style"),ub||(this.textNode=this.element.appendChild(x.createTextNode(""))));L.head.add(this.element);this.syncCssText();Ub()},Ea={},Vb=
!0,ub;try{ub=!x.createElement("style").appendChild(x.createTextNode(""))}catch(tc){ub=!0}Sa.add({destroy:function(){Vb=!1;for(var a in Ea)Ea[a].destroy();Ea=null}});var Va=x&&x.createElement("base"),Wb=ua(null,{className:"basis.CssResource",inUse:0,url:"",baseURI:"",cssText:"",resource:null,element:null,textNode:null,init:function(a){this.url=A.resolve(a);this.baseURI=A.dirname(a)+"/";Ea[a]=this},updateCssText:function(a){this.cssText!=a&&(this.cssText=a,this.inUse&&this.element&&(Tb(this.baseURI),
this.syncCssText(),Ub()))},syncCssText:function(){this.textNode?this.textNode.nodeValue=this.cssText:this.element.styleSheet.cssText=this.cssText},startUse:function(){if(!this.inUse){if(!this.resource){var a=ka(this.url);this.resource=a;this.cssText=a.get(!0)}L.head.ready(qc,this)}this.inUse+=1},stopUse:function(){this.inUse&&(this.inUse-=1,!this.inUse&&this.element&&L.remove(this.element))},destroy:function(){this.element&&Vb&&L.remove(this.element);this.cssText=this.resource=this.textNode=this.element=
null}});Wb.resources=Ea;nb=Wb;var va=wa("basis").extend({version:"1.0.0-rc1",NODE_ENV:Na,config:ea,platformFeature:{},path:A,namespace:wa,require:Ra,resource:ka,asset:function(a){return a},getter:Y,ready:qb,setImmediate:ia,clearImmediate:na,nextTick:function(){ia.apply(null,arguments)},Class:ua,Token:lb,DeferredToken:ic,cleaner:Sa,console:La,doc:L,object:{extend:C,complete:P,keys:function(a){var b=[],c;for(c in a)b.push(c);return b},values:function(a){var b=[],c;for(c in a)b.push(a[c]);return b},
slice:zb,splice:function(a,b){var c={};if(!b)return C(c,a);for(var d=0,e;e=b[d++];)e in a&&(c[e]=a[e],delete a[e]);return c},merge:Ya,iterate:Ab,coalesce:function(){for(var a=0;a<arguments.length;a++)if(null!=arguments[a])return arguments[a]}},fn:{$undefined:function(a){return void 0==a},$defined:function(a){return void 0!=a},$isNull:function(a){return null==a||void 0==a},$isNotNull:function(a){return null!=a&&void 0!=a},$isSame:function(a){return a===this},$isNotSame:function(a){return a!==this},
$self:Za,$const:function(a){return function(){return a}},$false:function(){return!1},$true:function(){return!0},$null:function(){return null},$undef:Q,getter:Y,nullGetter:ab,wrapper:function(a){return function(b){var c={};c[a]=b;return c}},lazyInit:function(a,b){var c=0,d,e;return d=function(){c++||(d.inited=!0,d.data=e=a.apply(b||this,arguments));return e}},lazyInitAndRun:function(a,b,c){var d=0,e,f;return e=function(){d++||(e.inited=!0,e.data=f=a.call(c||this));b.apply(f,arguments);return f}},runOnce:function(a,
b){var c=0;return function(){if(!c++)return a.apply(b||this,arguments)}}},array:C(da,Ya(Z,{from:da,create:Bb})),string:Ya(Ka,{isEmpty:function(a){return null==a||""==String(a)},isNotEmpty:function(a){return null!=a&&""!=String(a)}}),number:pb,bool:{invert:function(a){return!a}},json:{parse:"undefined"!=typeof JSON?JSON.parse:Ka.toObject}});wa("basis.dev").extend(La);ea.autoload&&Ra(ea.autoload)}).call(this)